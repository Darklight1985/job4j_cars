<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TODOlist</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <script type="text/javascript" src="myscript.js"></script>
</head>
<body>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.0.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" ></script>
<script>
    $(document).ready(function () {
        {
            addAds();
        }})
</script>
<script>
    function addAds() {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/salecars/adcar",
            dataType: "json",
            success: function (data) {
                addRow(data);
            }
        })
    }
</script>
<script>
    function getUser() {
        var value;
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/salecars/auth.do",
            async: false,
            dataType: "json",
            success: function (data) {
                $p = document.createElement('a')
                $p.className = "nav-link";
                $p.text = "Пользователь: " + data['name']
                $('#userrow li:first').append($p);
               value = data[1]['user'].name;
            }
        })
        return value;
    }

    function addRow(data) {
         var  cifra = getUser()
        for (let i = 0; i < data.length; i++) {
            <!-- <Блок с изображением> -->
              $divcap = document.createElement('div');
              $newimg = document.createElement('img');
              $newimg.width = "450";
              $newimg.src = ".\\images\\car.jpg"
            $divcap.className = "col-md-5";
              $divcheck = document.createElement('div');
              $divcheck.className = "form-check";
              $inputad = document.createElement('input');
              $inputad.className = "form-check-input";
              $inputad.type = "checkbox";
              $inputad.id = data[i]['id'];
              $inputad.disabled = true;
              $labelcheck = document.createElement('label');
              $labelcheck.className = "form-check-label";
              $labelcheck.htmlFor = data[i]['id'];
              $labelcheck.innerText= "Закрыть заявление о продаже"

              $divcheck.appendChild($inputad);
             $divcheck.appendChild($labelcheck);

              $divcap.appendChild($newimg);
            $divcap.appendChild($divcheck);

            <!-- <Блок содержащий карточки данных> -->
              $divcard = document.createElement('div');
              $divcard.className = "card-deck";

            $newdiv = document.createElement('div');
            $newdiv.className = "card-body";
            $labelUser = document.createElement('label');
            $labelUser.innerHTML = "Владелец";
            $inputUser = document.createElement('input');
            $inputUser.className = "form-control";
            $inputUser.style = "width: 100%";
            $inputUser.value = data[i]['user'].name;
            $inputUser.readOnly = true;

            $labelModel = document.createElement('label');
            $labelModel.innerHTML = "Модель"
            $inputModel = document.createElement('input');
            $inputModel.className = "form-control";
            $inputModel.style = "width: 100%";
            $inputModel.value = data[i]['car'].model.name;
            $inputModel.readOnly = true;
            $labelDate = document.createElement('label');
            $labelDate.innerHTML = "Дата размещенея объявления"
            $inputDate = document.createElement('input');
            $inputDate.className = "form-control";
            $inputDate.style = "width: 100%";
            $inputDate.value = data[i]['created'];
            $inputDate.readOnly = true;
            $labelStatus = document.createElement('label');
            $labelStatus.innerHTML = "Статус объявления"
            $inputStatus = document.createElement('input');
            $inputStatus.className = "form-control";
            $inputStatus.style = "width: 100%";
            if (data[i]['done'] == true) {
                $inputStatus.value = "Продано";
            } else {
                $inputStatus.value = "В продаже";
            }
            $inputStatus.readOnly = true;
            $labelDescr = document.createElement('label');
            $labelDescr.innerHTML = data[i]['description'];
            $newdiv.appendChild($labelUser);
            $newdiv.appendChild($inputUser);
            $newdiv.appendChild($labelModel);
            $newdiv.appendChild($inputModel);
            $newdiv.appendChild($labelDate);
            $newdiv.appendChild($inputDate);
            $newdiv.appendChild($labelStatus);
            $newdiv.appendChild($inputStatus)

            $newdiv.appendChild(document.createElement('br'));
            $newdiv.appendChild($labelDescr);


            $newdiv2 = document.createElement('div');
            $newdiv2.className = "card-body";
            $labelBody = document.createElement('label');
            $labelBody.innerHTML = "Тип кузова"
            $inputBody = document.createElement('input');
            $inputBody.className = "form-control";
            $inputBody.style = "width: 100%";
            $inputBody.value =  data[i]['car'].bodyType.name;
            $inputBody.readOnly = true;
            $labelEngine = document.createElement('label');
            $labelEngine.innerHTML = "Двигатель"
            $inputEngine = document.createElement('input');
            $inputEngine.className = "form-control";
            $inputEngine.style = "width: 100%";
            $inputEngine.value =  data[i]['car'].engine.name;
            $inputEngine.readOnly = true;

            $newdiv2.appendChild($labelBody);
            $newdiv2.appendChild($inputBody);
            $newdiv2.appendChild($labelEngine);
            $newdiv2.appendChild($inputEngine);

            $newdiv3 = document.createElement('div');
            $newdiv3.className = "card-body";
            $labelDrive = document.createElement('label');
            $labelDrive.innerHTML = "Тип привода"
            $inputDrive = document.createElement('input');
            $inputDrive.className = "form-control";
            $inputDrive.style = "width: 100%";
            $inputDrive.value =  data[i]['car'].driveType.name;
            $inputDrive.readOnly = true;
            $labelPower = document.createElement('label');
            $labelPower.innerHTML = "Мощность, л.с."
            $inputPower = document.createElement('input');
            $inputPower.className = "form-control";
            $inputPower.style = "width: 100%";
            $inputPower.value =  data[i]['car'].power;
            $inputPower.readOnly = true;

            $newdiv3.appendChild($labelDrive);
            $newdiv3.appendChild($inputDrive);
            $newdiv3.appendChild($labelPower);
            $newdiv3.appendChild($inputPower);

            $divcard.appendChild($newdiv);
            $divcard.appendChild($newdiv2);
            $divcard.appendChild($newdiv3);

                <!-- <Создаем основной несущий блок> -->

            $divgen = document.createElement('div');
            $divgen.className = "card text-white bg-dark mb-3";

            $divsub = document.createElement('div');
            $divsub.className = "row no-gutters";

            $divsub.appendChild($divcap)
            $divsub.appendChild($divcard)

            $divgen.appendChild($divsub);

            $('#table tbody').append($divgen);

        }
    }
</script>

<div class="container-fluid">
    <form>
        <div class="card-header" >
                <ul class="nav" id="userrow">
                    <li class="nav-item">
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/salecars/logout.do">Выйти</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/salecars/newad.html">Разместить объявление</a>
                    </li>
                </ul>
        </div>
        <table class="table" id = "table">
            <thead class="table-sub-heading-color">
            <span class="badge badge-secondary"><h4>Перечень объявлений</h4></span>
            </thead>
            <tbody>
            </tbody>
        </table>
    </form>
</div>
</body>
</html>